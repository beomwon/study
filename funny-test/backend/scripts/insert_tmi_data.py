"""
TMI 데이터를 데이터베이스에 삽입하는 스크립트
"""
import sys
import os
import asyncio
from datetime import date, timedelta

# 부모 디렉토리를 Python 경로에 추가
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from app.core import db

# TMI 리스트
tmi_list = [
    "케찹은 1830년대엔 약(medicine)으로 팔렸다.",
    "포도는 전자레인지에 넣으면 불꽃이 튄다.",
    "벌꿀은 유통기한이 없다.",
    "프링글스는 감자가 아니다.",
    "바나나는 방사능을 띤다.",
    "사람은 하루에 약 600번 방귀를 참는다.",
    "눈을 감고는 재채기를 할 수밖에 없다.",
    "배꼽 안엔 1,400종 이상의 세균이 산다.",
    "사람은 자기 엉덩이를 직접 못 핥는 거의 유일한 포유류다.",
    "기침할 때 나오는 속도는 시속 80~160km다.",
    "문어는 심장이 3개다.",
    "달팽이는 입 안에 이가 수천 개 있다.",
    "상어는 태어나자마자 형제자매를 잡아먹는다.",
    "소는 사람 친구를 구분할 수 있고, 질투도 느낀다.",
    "펭귄은 짝에게 예쁜 돌을 줘서 구애한다.",
    "하루는 정확히 24시간이 아니다.",
    "지구엔 '초단위 윤초(leap second)' 조정이 있다.",
    "태양은 사실 '흰색'이다.",
    "달은 매년 약 3.8cm씩 멀어지고 있다.",
    "지구의 중심 온도는 태양 표면보다 뜨겁다.",
    "세계에서 가장 깊은 다이빙 풀 'Deep Dive Dubai'는 60 m 깊이로 기네스 기록 보유 중이다.",
    "세계에서 가장 긴 뱀은 '레티큘레이티드 파이톤'으로, 최대 10 m까지 자란다.",
    "앙헬 폭포는 높이가 979 m이며, 세계에서 가장 높은 단일 폭포다.",
    "투겔라 폭포는 총 낙차 983 m로 앙헬 폭포보다 높다는 주장도 있다.",
    "USB는 어느 방향으로도 처음엔 잘 안 들어간다.",
    "가장 빠르게 웃음 10번 하기 기록은 4.37초다.",
    "가장 오래 딸꾹질한 사람은 68년간 딸꾹질했다.",
    "북극곰은 피부가 검정색이다.",
    "한글 자음 중 'ㅁ'은 입 모양을 본 따 만든 문자다.",
    "'ㅋㅋ'은 한국에서 유래한 글로벌 채팅 이모티콘이다.",
    "햄버거를 3분 안에 가장 많이 먹은 기록은 12개다.",
    "외운 숫자 가장 많은 사람은 70,000자리까지 원주율을 암기했다.",
    "가장 빠르게 알파벳 뒤집어 말하기 기록은 1.62초다.",
    "가장 긴 손톱을 가진 여성은 총 길이 13m 이상이다.",
    "가장 많이 유통된 책은 성경 다음으로 IKEA 조립 설명서다.",
    "지우개는 원래 '빵조각'을 쓰던 시절이 있었다.",
    "샤프심은 실제로는 '흑연과 점토의 혼합물'이다.",
    "엘리베이터 닫힘 버튼은 실제로 작동하지 않는 경우가 많다.",
    "사람은 자기 무게의 약 2%를 매일 떨어뜨리는 피부 세포로 잃는다.",
    "귀는 평생 자란다.",
    "고양이는 사람과 소통하기 위해 꼬리를 흔든다.",
    "나무는 뿌리로 소통한다.",
    "뱀은 먹이를 삼킨 후 서서히 소화시킨다.",
    "물고기는 꿈을 꿀 수 있다.",
    "인간의 DNA와 바나나는 약 60%가 같다.",
    "우주는 완벽한 검은색이 아니다.",
    "무지개는 둥근 고리 모양이지만 땅에서는 보통 반만 보인다.",
    "빙하는 지구 담수의 약 70%를 차지한다.",
    "인간의 심장은 하루에 약 100,000번 뛴다.",
    "전자레인지에 금속을 넣으면 불꽃이 튄다.",
    "개는 사람의 감정을 읽을 수 있다.",
    "펭귄은 수영 속도가 시속 15km에 이른다.",
    "잠자는 동안 뇌는 정보를 정리한다.",
    "새는 자석을 이용해 방향을 찾는다.",
    "나비는 맛을 발로 느낀다.",
    "벌은 5개의 눈을 가지고 있다.",
    "거미줄은 강철보다 강하다.",
    "코끼리는 뛰지 못한다.",
    "고래는 인간보다 더 오래 숨을 참는다.",
    "사람의 몸에는 약 60,000마일의 혈관이 있다.",
    "하늘은 파란색이 아니라 대기가 산란시키는 빛 때문이다.",
    "화산재는 비료로 사용될 수 있다.",
    "토마토는 과일이지만 요리에서는 채소로 취급된다.",
    "최초의 컴퓨터 버그는 실제 벌레에서 유래됐다.",
    "지구상의 모든 개미 무게는 인간 전체 무게와 맞먹는다.",
    "과일 중에 제일 빨리 썩는 것은 바나나다.",
    "인간은 매일 20,000번 숨을 쉰다.",
    "세계에서 가장 큰 꽃은 라플레시아로 무게가 11kg이다.",
    "오징어의 눈은 인간 눈과 비슷한 구조다.",
    "벌새는 1초에 70번 날갯짓을 한다.",
    "사람의 뇌는 75%가 물로 구성되어 있다.",
    "지구는 매년 약 2.5cm씩 자전 속도가 느려진다.",
    "아인슈타인은 학교에서 수학을 못했다는 오해가 있다.",
    "코알라는 하루에 20시간을 잔다.",
    "심해 생물들은 빛이 없는 환경에서 스스로 빛을 낸다.",
    "나무는 매년 약 20억 톤의 이산화탄소를 흡수한다.",
    "산호초는 동물이자 식물이다.",
    "금속 중 가장 가벼운 것은 리튬이다.",
    "북극곰의 털은 사실 투명하다.",
    "체코에는 세계에서 가장 긴 터널 중 하나가 있다.",
    "진짜 인간의 신장은 평균 1.7m 정도다.",
    "하늘에서 떨어지는 얼음은 얼음 번개 현상일 수 있다.",
    "식물도 스트레스를 받으면 '비명을 지른다'는 연구가 있다.",
    "코끼리의 기억력은 매우 뛰어나다.",
    "지구는 매년 100톤의 우주 먼지를 받는다.",
    "파리는 하루에 5,000번 정도 날갯짓을 한다.",
    "물은 3가지 상태(고체, 액체, 기체)를 한 번에 가질 수 있다.",
    "사람은 밤에 키가 약간 커진다.",
    "초콜릿은 개에게 치명적이다.",
    "달걀은 보관 온도에 따라 2주 이상 차이가 난다.",
    "휴대전화에는 수십 개의 센서가 내장되어 있다.",
    "지구는 하루에 약 1,670km 속도로 자전한다.",
    "세계에서 가장 오래 산 나무는 5,000년 이상 된 브리슬콘 소나무다.",
    "고래는 인류보다 오래 살 수 있다.",
    "꿀벌은 인간에게 중요한 식량 공급자다.",
    "산소는 지구 대기의 약 21%를 차지한다.",
    "개구리는 피부를 통해 숨을 쉰다.",
    "태양계에서 가장 큰 화산은 화성의 올림푸스 산이다.",
    "가장 오래된 동굴 벽화는 약 4만 년 전 것이다.",
    "미국의 자유의 여신상은 프랑스에서 만들어졌다.",
    "바나나는 사실 베리(berry)다.",
    "사람의 뼈는 콘크리트보다 강하다.",
    "물고기의 수명은 촉각 역할을 한다.",
]

def insert_tmi_data():
    """TMI 데이터를 데이터베이스에 삽입"""
    start_date = date(2025, 7, 6)  # 시작 날짜: 2025-07-06
    
    data_to_insert = []
    
    for i, content in enumerate(tmi_list):
        current_date = start_date + timedelta(days=i)
        data_to_insert.append({
            "date": current_date.isoformat(),
            "content": content
        })
    
    try:
        # 데이터베이스에 일괄 삽입
        result = db.get_client().table("tmi").insert(data_to_insert).execute()
        print(f"✅ 성공적으로 {len(data_to_insert)}개의 TMI 데이터를 삽입했습니다!")
        print(f"📅 날짜 범위: {start_date} ~ {start_date + timedelta(days=len(tmi_list)-1)}")
        return result
        
    except Exception as e:
        print(f"❌ 데이터 삽입 중 오류 발생: {e}")
        return None

if __name__ == "__main__":
    print("🚀 TMI 데이터 삽입을 시작합니다...")
    result = insert_tmi_data()
    if result:
        print("🎉 모든 작업이 완료되었습니다!")
